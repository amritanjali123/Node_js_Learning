const event = require("events");
const EventEmitter = event.EventEmitter;
function Counter() {
  this.val = 0;
}

Counter.prototype = Object.create(EventEmitter.prototype);

Counter.prototype.increment = function() {
  this.val++;
};

Counter.prototype.decrement = function() {
  if (--this.val === 0) return this.emit("zero");
};

Counter.prototype.isZero = function isZero() {
  return this.val === 0;
};

Counter.prototype.getCount = function() {
  return this.val;
};

Counter.prototype.onFinish = function(cb) {
  this.once("zero", cb);
};

module.exports = Counter;
